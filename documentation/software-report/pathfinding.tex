\subsubsection{Subsystem Overview}\label{subsubsec:overview}
The Navigation Software Subsystem (the ``Nav'') accomplishes autonomous navigation tasks by combining data from the
Visual Processing Software Subsystem and the IMU Subsystem. A triangle mesh defining all known terrain is obtained from
the Visual Processing Software Subsystem, flattened into a 2D heightmap, and used to calculate a terrain gradient grid.
This gradient grid is stored for the A* algorithm to use in finding paths along minimally steep areas. The Nav can be
supplied with a starting position/orientation and a target position/orientation, and it will attempt to find a safe path
between the two points. The result will be exposed to the RMC Controls team through the Comms Software Subsystem in
order to guide their robot through the competition arena.

\subsubsection{Testing Suite}\label{subsubsec:testing-suite}
Table~\ref{table:testing-suite} below covers what software functions and components of the Nav were verified, how they
were verified, and whether each one passed.
Localization estimates are left untested until integration with the Visual Processing Software Subsystem since they
require both subsystems to work together.

\begin{table}[htb]
    \caption{Navigation Software Subsystem Testing Suite}
    \centering
    \begin{tabular}{P{2cm} P{7cm} P{3.5cm} P{1.5cm}}

        Name & Objectives & Definition & Results \\

        A* & \underline{Correctness} - Is the algorithm implemented in a sound manner? & Unit tests & Pass \\
        Nav & \underline{Safety} - Does it avoid steep (>20Â° incline) slopes?\linebreak\underline{Adherence to the supplied parameters} - Start and end position and orientation, minimum turn radius\linebreak\underline{Length} - Does it take a reasonable path, not looping or backtracking? & Unit tests, human review & Pass \\
        Mesh to Grid & \underline{Faithfulness} - Does the grid representation closely match the physical terrain? & Human-reviewed & Pass

    \end{tabular}
    \label{table:testing-suite}
\end{table}

In verifying the Nav, the path generated was overlaid on the test terrain so that the qualities listed in
Table~\ref{table:testing-suite} could be observed. Examples are shown in Figure~\ref{fig:nav-tests}.

\subsubsection{Changes from Previous Verification Plan}\label{subsubsec:changes-to-plan}
Previously, the gradient grid obtained from the triangle mesh did not accurately reflect the physical environment in
some cases.
The biggest issue was that overhangs with vertical faces, when flattened to 2D, appeared as a massive spike in the
terrain heightmap, as if they were solid walls.

This was worked around by ignoring mesh vertices more than 1 meter above the camera's current position.
The 1 meter was chosen arbitrarily to represent the height of the robot; this will eventually be a configurable
parameter.
That way, only overhangs low enough to potentially hit the robot will be treated as a wall.
